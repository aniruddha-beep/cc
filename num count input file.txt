//gedit count_elements.l

%{
#include <stdio.h>
#include <string.h>

int keywords = 0, identifiers = 0, comments = 0, lines = 0, spaces = 0, words = 0;

char *keyword_list[] = {
    "auto","break","case","char","const","continue","default","do",
    "double","else","enum","extern","float","for","goto","if",
    "int","long","register","return","short","signed","sizeof","static",
    "struct","switch","typedef","union","unsigned","void","volatile","while"
};

int isKeyword(const char *word) {
    for (int i = 0; i < 32; i++) {
        if (strcmp(word, keyword_list[i]) == 0)
            return 1;
    }
    return 0;
}
%}

%%
"//".*                 { comments++; lines++; }             // Single-line comment
"/*"([^*]|\*+[^*/])*"*/" { comments++; }                   // Multi-line comment

[ \t]+                 { spaces++; }                       // Count spaces/tabs
\n                     { lines++; }                        // Count lines

[a-zA-Z_][a-zA-Z0-9_]* {
                          words++;
                          if (isKeyword(yytext))
                              keywords++;
                          else
                              identifiers++;
                        }

.                      ;                                   // Ignore other characters
%%

int main() {
    yylex();
    printf("\n--- File Analysis ---\n");
    printf("Lines: %d\n", lines);
    printf("Spaces: %d\n", spaces);
    printf("Words: %d\n", words);
    printf("Keywords: %d\n", keywords);
    printf("Identifiers: %d\n", identifiers);
    printf("Comments: %d\n", comments);
    return 0;
}

int yywrap() { return 1; }

//save and close

//flex count_elements.l
//gcc lex.yy.c -o count_elements -lfl
//./count_elements
